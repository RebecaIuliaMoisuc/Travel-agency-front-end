<div class="card">
    <h5>Tours</h5>
    
    <!-- Form for adding new tour -->
    <!-- <form (ngSubmit)="addTour()" class="mb-3">
        <div class="flex align-items-center">
            <span class="p-float-label mr-2">
                <p-dropdown [options]="cities" [(ngModel)]="newTour.from_city.city_id" optionLabel="city_name" optionValue="city_id" placeholder="From City" name="from_city_id" required></p-dropdown>
                <label for="from_city_id">From City</label>
            </span>
            <span class="p-float-label mr-2">
                <p-dropdown [options]="cities" [(ngModel)]="newTour.to_city.city_id" optionLabel="city_name" optionValue="city_id" placeholder="To City" name="to_city_id" required></p-dropdown>
                <label for="to_city_id">To City</label>
            </span>
            <span class="p-float-label mr-2">
                <p-dropdown [options]="hotels" [(ngModel)]="newTour.to_hotel.hotel_id" optionLabel="hotel_name" optionValue="hotel_id" placeholder="To Hotel" name="to_hotel_id" required></p-dropdown>
                <label for="to_hotel_id">To Hotel</label>
            </span>
            <span class="p-float-label mr-2">
                <p-dropdown [options]="airports" [(ngModel)]="newTour.to_airport.airport_id" optionLabel="airport_name" optionValue="airport_id" placeholder="To Airport" name="to_airport_id" required></p-dropdown>
                <label for="to_airport_id">To Airport</label>
            </span>
            <span class="p-float-label mr-2">
                <input pInputText id="departure_date" type="date" [(ngModel)]="newTour.departure_date" name="departure_date" required />
                <label for="departure_date">Departure Date</label>
            </span>
            <span class="p-float-label mr-2">
                <input pInputText id="return_date" type="date" [(ngModel)]="newTour.return_date" name="return_date" required />
                <label for="return_date">Return Date</label>
            </span>
            <span class="p-float-label mr-2">
                <input pInputText id="number_of_days" type="number" [(ngModel)]="newTour.number_of_days" name="number_of_days" required />
                <label for="number_of_days">Number of Days</label>
            </span>
            <span class="p-float-label mr-2">
                <input pInputText id="type" type="text" [(ngModel)]="newTour.type" name="type" required />
                <label for="type">Type</label>
            </span>
            <span class="p-float-label mr-2">
                <input pInputText id="adult_price" type="number" [(ngModel)]="newTour.adult_price" name="adult_price" required />
                <label for="adult_price">Adult Price</label>
            </span>
            <span class="p-float-label mr-2">
                <input pInputText id="child_price" type="number" [(ngModel)]="newTour.child_price" name="child_price" required />
                <label for="child_price">Child Price</label>
            </span>
            <span class="p-float-label mr-2">
                <input pCheckbox id="promoted" [(ngModel)]="newTour.promoted" name="promoted" binary="true" />
                <label for="promoted">Promoted</label>
            </span>
            <button pButton type="submit" label="Add Tour" icon="pi pi-plus"></button>
        </div>
    </form> -->

    <!-- Table for displaying tours -->
    <p-table #dt4 [value]="tours" [loading]="loading" responsiveLayout="scroll" [paginator]="true"
             [rows]="10" [rowHover]="true" [globalFilterFields]="['tour_id','from_city.city_name','to_city.city_name','to_hotel.hotel_name','to_airport.airport_name','departure_date','return_date','number_of_days','type','adult_price','child_price']">
        <ng-template pTemplate="caption">
            <div class="flex justify-content-between flex-column sm:flex-row">
                <button pButton label="Clear" class="p-button-outlined mb-2" icon="pi pi-filter-slash" (click)="clear(dt4)"></button>
                <span class="p-input-icon-left mb-2">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text" #filter (input)="onGlobalFilter($event, dt4)" placeholder="Search Keyword" class="w-full"/>
                </span>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                
                <th>From City</th>
                <th>To City</th>
                <th>To Hotel</th>
                <th>To Airport</th>
                <th>Departure Date</th>
                <th>Return Date</th>
                <th>Number of Days</th>
                <th>Type</th>
                <th>Adult Price</th>
                <th>Child Price</th>
                <th>Action</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-tour>
            <tr>
                
                <td>{{ tour.from_city.city_name }}</td>
                <td>{{ tour.to_city.city_name }}</td>
                <td>{{ tour.to_hotel.hotel_name }}</td>
                <td>{{ tour.to_airport.airport_name }}</td>
                <td>{{ tour.departure_date | date: 'yyyy-MM-dd' }}</td>
                <td>{{ tour.return_date | date: 'yyyy-MM-dd' }}</td>
                <td>{{ tour.number_of_days }}</td>
                <td>{{ tour.type }}</td>
                <td>{{ tour.adult_price }}</td>
                <td>{{ tour.child_price }}</td>
                <td>
                    <button pButton type="button" icon="pi pi-trash" class="p-button-danger" (click)="deleteTour(tour.tour_id)"></button>
                </td>
                
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="13">No tours found.</td>
            </tr>
        </ng-template>
        <ng-template pTemplate="loadingbody">
            <tr>
                <td colspan="13">Loading tours data. Please wait.</td>
            </tr>
        </ng-template>
    </p-table>
</div>
